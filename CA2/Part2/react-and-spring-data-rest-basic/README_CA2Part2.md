# Technical Report - Class Assignment 2 Part 2

## Index
- [Overview](#overview)
- [Description of the Requirements Implementation](#description-of-the-requirements-implementation)
    - [Step 1: Start new gradle spring boot project](#step-1-start-new-gradle-spring-boot-project)
    - [Step 2: Modify the gradle spring boot project](#step-2-modify-the-gradle-spring-boot-project)
    - [Step 3: Add gradle plugin frontend](#step-3-add-gradle-plugin-frontend)
    - [Step 4: Develop new tasks to copy and delete files using gradle](#step-4-develop-new-tasks-to-copy-and-delete-files-using-gradle)
- [Conclusion](#conclusion)

## Overview
The objective of Part 2 of this assignment is to convert the basic version of the Tutorial application to [Gradle](https://gradle.org),
instead of Maven. In this section, we will outline the tasks involved in completing Part 2 and provide an overview of the steps 
required to accomplish them.

## Description of the Requirements Implementation

### Step 1: Start new gradle spring boot project
- Begin by creating a new branch called tut-basic-gradle
  1. `git branch tut-basic-gradle`
  2. `git checkout tut-basic-gradle`
- Start a new gradle spring boot project with the following dependencies: Rest Repositories; Thymeleaf; JPA; H2, using https://start.spring.io
- Extract the generated zip file inside the folder 'CA2/Part2/' of the repository, resulting in a ”empty” spring application that can be built using gradle
- Check the available gradle tasks by executing `./gradlew tasks`.

### Step 2: Modify the gradle spring boot project
- Delete the src folder
- Copy the src folder (and all its subfolders) from the basic folder of the tutorial into this new folder.
- Copy the files [webpack.config.js](react-and-spring-data-rest-basic/webpack.config.js) and [package.json](react-and-spring-data-rest-basic%2Fpackage.json)
- Delete the folder src/main/resources/static/built/ since this folder will be generated from the javascript by the webpack tool.
- Change the imports of [Employee](react-and-spring-data-rest-basic/src/main/java/com/greglturnquist/payroll/Employee.java) from javax to jakarta, as following:
   ```java
     import jakarta.persistence.Entity;
     import jakarta.persistence.GeneratedValue;
     import jakarta.persistence.Id;
     }
  ```
- Experiment the application by using `./gradlew bootRun`.
- Open the browser using http://localhost:8080. The page will be empty, since the gradle is missing the plugin for dealing with the frontend code.

### Step 3: Add gradle plugin frontend
- Add the gradle plugin org.siouan.frontend to the project so that grade is also able to manage the frontend https://github.com/Siouan/frontend-gradle-plugin
- Add the version of plugin block in [build.gradle](react-and-spring-data-rest-basic/build.gradle) compatible with java version, in case of the java version 17: 
   ```java
       id 'org.siouan.frontend-jdk17' version '8.0.0'
  ```
- Add code in the [build.gradle](react-and-spring-data-rest-basic/build.gradle) to configure the plugin
   ```java
      frontend {
         nodeVersion = '16.20.2'
         assembleScript = 'run build'
         cleanScript = 'run clean'
         checkScript = 'run check'
      }
  ```
- Update the scripts in [package.json](react-and-spring-data-rest-basic/package.json) to configure the execution of webpack
   ```java
      "scripts": {
        "webpack": "webpack",
        "watch": "webpack --watch -d --output ./target/classes/static/built/bundle.js",
        "build": "npm run webpack",
        "check": "echo Checking frontend",
        "clean": "echo Cleaning frontend",
        "lint": "echo Linting frontend",
        "test": "echo Testing frontend"
      },
  ```
- Add a new configuration of package-manager in [package.json](react-and-spring-data-rest-basic/package.json)
   ```java
      "packageManager": "npm@9.6.7",
   ```
- Execute `./gradlew build`. The tasks related to the frontend are also executed and the frontend code is generated.
- Execute the application by using `./gradlew bootRun`.

### Step 4: Develop new tasks to copy and delete files using gradle
- Add a task to [build.gradle](react-and-spring-data-rest-basic/build.gradle) to copy the generated jar to a folder named 'dist' located at the project root folder level
   ```java
      task copyJarToDist(type: Copy) {
        from 'build/libs/'
        into 'dist'
        include '*.jar'
      }
   ```
- Add a task to [build.gradle](react-and-spring-data-rest-basic/build.gradle) to delete all the files generated by webpack. This new task should be executed automatically by gradle before the task clean.
   ```java
      task cleanWebpackFiles(type: Delete) {
         delete 'src/main/resources/static/built/'
      }
      clean.dependsOn cleanWebpackFiles
   ```
- Experiment all the developed features with the command `./gradlew copyJarToDist` and `./gradlew cleanWebpackFiles`
- Commit the code and merge with the master branch
  1. `git push origin tut-basic-gradle`
  2. `git checkout master`
  3. `git merge --no-ff tut-basic-gradle`
  4. `git push`

## Alternative Solution


## Conclusion
In conclusion, Part 2 of the assignment.






